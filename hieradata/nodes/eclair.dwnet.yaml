# groups to create on this host
admin::groups:
  - deployment

# enables this host to be the ganglia data collector
ganglia::gmond::udp_recv_channel:
  - port: 8649
ganglia::gmond::tcp_accept_channel:
  - port: 8649

# configuring gmetad
role::ganglia::gmetad: yes
ganglia::gmetad::clusters:
  - name: go2tech.de
    polling_interval: 15
    address: localhost
ganglia::gmetad::all_trusted: no
ganglia::gmetad::trusted_hosts: []

# config parameters for postfix
postfix::my_hostname: go2tech.de
postfix::keypath: /etc/letsencrypt/live/blog.go2tech.de/privkey.pem
postfix::certpath: /etc/letsencrypt/live/blog.go2tech.de/fullchain.pem
postfix::vmaildbpass: >
    ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQEw
    DQYJKoZIhvcNAQEBBQAEggEAk4OaayYYiTr55g/oFAIayj65Wf8Zy6xwqUpz
    sI1/e0Ob3xmnYq8li2knMFYQBQcE5BNPNCSAMoTZZASdMt/w0I0H+2D+q4sk
    XqZeUX3cOcHrbpM1NvHEbBG1+wJNjtCAq5XdENbr9+awjCEuRvbyf1a3nR5m
    C6Z+1zJ8ubhOlDhnJVpv7mbXCg+6R98U8/46PnFgiYD6SYN7kt23YYBW6x2i
    ABw7j1afQCILalL2cmwXP5KYCLg0h8uLsKM5VG4MoCeuncTJrBkGazjXpEGZ
    i1JB/RL4vluR/OQfdK/EanyPuYqm3ANGnZDneiXDTjMeq8azywj44QXPufG7
    TOrfjjA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBBj5LROC9BDVPE1gYl1
    14tCgBD4TuxwpNAwC1bUN3AcXxcw]
monit::postfix::certcheck:
  'mail_go2tech.de':
    host: 'go2tech.de'
    port: 587
    protocol: smtp

# mariadb settings
role::mariadb::isslave: true

# logstash settings
role::logstash::redis_input_host: 37.120.178.25
role::logstash::redis_input_port: 6379
role::logstash::redis_input_data_type: list
role::logstash::redis_input_key: logstash
role::logstash::es_output_flush_size: 5000
role::logstash::es_output_host: 127.0.0.1
role::logstash::es_output_port: 9200
role::logstash::es_output_idle_flush_time: 1

# gitlab configuration
gitlab::external_url: 'https://gerrit.go2tech.de'
gitlab::nginx:
  enable: false
gitlab::web_server:
  external_users:
    - 'www-data'
gitlab::logging:
  svlogd_size: '200 * 1024 * 1024'
gitlab::unicorn:
  port: 8081
gitlab::postgresql:
  shared_buffers: 256MB
gitlab::git_data_dirs:
  default:
    path: '/data/development/git'
gitlab::gitlab_rails:
  ldap_enabled: true
  ldap_servers:
    go2tech:
      label: 'go2tech.de LDAP'
      host: 'localhost'
      port: 389
      uid: 'uid'
      method: 'plain'
      bind_dn: 'CN=gerrit,OU=users,DC=go2tech,DC=de'
      password: >
        ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQEw
        DQYJKoZIhvcNAQEBBQAEggEAMa9LgZNFtezSAu48KzRVUWqVO6+WPupeFVkJ
        1Lj+dVDdh7naEMX1jd2tcMC/QCqlwA4s3XbVvenGbUJbYaJ1+GZuWP0PDKPP
        a2QAGiNFoBDziO7A48CQzQdUA9xOUzAMq24ClUUilKKAUBK3AmnJ4QO2zoHq
        RxMpFRf3IepQHHK9suQU4dOdhkkax+Im3PYbQaZD+MBD02otSd9H5w2JJ3ul
        mF8hvTxEBS5JZHVzUBfvP6HLgRiWLNYHtq3aKJiSmFsWfGcAi5eqzJjBEVGL
        aDn0rTRFXMiyTMDg6pEAzqfkGdiX1PtJdmxmUYNVB4yXJ7CStgNPz0UJoH/L
        RDRd+jA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBA3LW01GJrtdb/yfEFI
        +r1zgBA+ZZAXHRa73EuJ7u4ZxMko]
      active_directory: false
      allow_username_or_email_login: false
      block_auto_created_users: false
      base: 'OU=users,DC=go2tech,DC=de'
      group_base: 'OU=groups,DC=go2tech,DC=de'
      user_filter: ''

# mariadb settings
mysql::server::root_password: >
    ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQEw
    DQYJKoZIhvcNAQEBBQAEggEArgQjByhFDMmlfUIoro4eh2+FrAJGE9Io72nU
    26WADS7rOsTI2R4iZWgw419WrwdCuJoqBYB3PM5yKA1HOORID/pmOLZkPlQF
    6yrDbp+clj6D57Dj7xOZjLoU9+wDtIK3opGEO2dFcRs3osl08EMnrQJ7elw5
    L+GXes7gM3vjAvbXkxbWz7IeaKO/LKKuTP9KcJrJArjoWCL22Zq2u0WxQQuo
    YM2raxh+ZvbLZh2PR/snKqzC94HN+8CrMAPZ0Rc1/fgBb7rwa72Q80U3Lev1
    6xcqmfwC8seaYg626dx53rCShUnHnymVxLlakxjg/y5g2iQGO7Ki2F6duD+E
    5gcbgjA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBBRzxxD3VVEF7yT6m9u
    SZkHgBBz9i+59ZCWvHlwci7YL+BO]

mailadmin::datadir: /data/www/go2tech.de/mail-admin
mailadmin::ldap_base_dn: 'OU=users,DC=go2tech,DC=de'
mailadmin::ldap_search_dn: 'CN=mail-admin,OU=users,DC=go2tech,DC=de'
mailadmin::ldap_search_pw: >
    ENC[PKCS7,MIIBiQYJKoZIhvcNAQcDoIIBejCCAXYCAQAxggEhMIIBHQIBADAFMAACAQEw
    DQYJKoZIhvcNAQEBBQAEggEAZ5R+fvLrr9HFAx/C7UODSEOTlWPAL0lqwrnU
    HoyLLdzf+k8WRb1SvutK6cXVrgQD3DVsg4Qbb/kOnAcN062XtRCIgWM84XyB
    Lm/ro1IGv1x3ow+PLTvXe4lQq+5LXi4sLrlMWhcPhAIoi0pFRcXbwi3tnriW
    Mm3FDxs3fj4ahr3vKma2x4ddGv9oQ/2Nd44Te1FiJKnilJj3OC7IF8XUi2wo
    0wHLuUahsRaU+z/F0ZlA4LObuA9+7XxNu8DgxSdX0hsEmTUBAlxZPuaxFmaF
    zZi64QLSN4ae2TEK8zbYZU9yQ0mf3H5o3p5tUOlri/mz1CW6E1E21Asvt4yT
    xjLlKzBMBgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBCCFEoLUNzM4ZU3YAiu
    JPfLgCDcXiIaai6UodMysTFH0e6O53b3MCs4N8ciy511NHs4mg==]
mailadmin::ldap_dn_string: 'dc=go2tech,dc=de'
mailadmin::ldap_query_string: '(&(cn={username})(memberOf=cn=EMailAdministrator,ou=groups,dc=go2tech,dc=de))'
